<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Global</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Global</h1>

    




<section>

<header>
    
        <h2></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="signTx"><span class="type-signature"></span>signTx<span class="signature">(signTxParamObj)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Sign txs with derived keyPair
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>signTxParamObj</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Sign tx parameter object
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>message</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>
|

<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Message is different when choosing different keyType.
message is an Object if keyType is ETH; message is a string if keyType is OLT or BTC.
If KeyType is ETH, message must contain txParams field which is an object,
txConfig field is optional which is also an object, it is used to indicate Ethereum network and hardfork,
DO NOT pass txConfig object in message to use default txConfig (chain is mainnet, hardfork is petersburg).
In txConfig object, valid chain value should be one of "mainnet", "rinkeby", "ropsten", "kovan", "goerli",
valid hardfork value should be one of "petersburg", "constantinople", "byzantium".
Please see examples below.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>keyType</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">KeyType determines which chain is used to sign. Value should be string of either "OLT", "BTC " or "ETH".</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>keyIndex</code></td>
            

            <td class="type">
            
                
<span class="param-type">uint</span>


            
            </td>

            

            

            <td class="description last">KeyIndex is used to derive new key.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>password</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Password of encrypted master key seed.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>encryptedMasterKeySeed</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">EncryptedMasterKeySeed string.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>network</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Network determines which network to use. Value should be one of "BTCOIN", "TESTNET" or "REGTEST"(Network is only applicable for BitCoin for now).</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="derivedKeyManager.js.html">derivedKeyManager.js</a>, <a href="derivedKeyManager.js.html#line206">line 206</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    If success, Promise.resolve with {response : {signature : signatureValue[,recovery : recoveryValue]}}; If fail, Promise.reject with {error : errorObject} (recovery is only for BTC).
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>// 1.sign ETH tx with network as goerli and hardfork as byzantium:
const txParams = {
          nonce: 0,
          gasPrice: 1.1,
          gasLimit: 1,
          to: '0x034ca1740f01ae3e7fa6a2fc6b2afde39324f282',
          value: "1",
          data: "",
      };
const txConfig = {chain : "goerli", hardfork :"byzantium"};
const signData = {
          message: {txParams, txConfig},
          keyType: "ETH",
          keyIndex: 0,
          password: "123456",
          encryptedMasterKeySeed
      };
const signTxResult = await HDVault.derivedKeyManager.signTx(signData).catch(err => {
          console.error("ERR : ", err.error);
      });
const {response} = signTxResult;
const {signature} = response;
console.log("get signature: ", signature);</code></pre>

    <pre class="prettyprint"><code>// 2.sign ETH tx with default network(mainnet) and default hardfork(petersburg):
const txParams = {
          nonce: 0,
          gasPrice: 1.1,
          gasLimit: 1,
          to: '0x034ca1740f01ae3e7fa6a2fc6b2afde39324f282',
          value: "1",
          data: "",
      };
const signData = {
          message: {txParams},
          keyType: "ETH",
          keyIndex: 0,
          password: "123456",
          encryptedMasterKeySeed
      };
const signTxResult = await HDVault.derivedKeyManager.signTx(signData).catch(err => {
          console.error("ERR : ", err.error);
      });
const {response} = signTxResult;
const {signature} = response;
console.log("get signature: ", signature);</code></pre>

    <pre class="prettyprint"><code>// 3.sign BTC tx:
// BTC message should be a 64 char long string
const rawTxmessageBTC = "072a8543e388c4155ccbcd325f129000214095725598721cea986fcd0fc38d6a";
const signData = {
         message: rawTxmessageBTC,
         keyType: "BTC",
         keyIndex: 0,
         password: "123456",
         encryptedMasterKeySeed
     };
const signTxResult = await HDVault.derivedKeyManager.signTx(signData).catch(err => {
         console.error("ERR : ", err.error);
 });
const {response} = signTxResult;
const {signature} = response;
console.log("get signature: ", signature);</code></pre>

    <pre class="prettyprint"><code>// 4.sign OLT tx:
// OLT message should be a base64 encoded string
const messageOLT = 'eyJ0eF90eXBlIjoyLCJ0eF9kYXRhIjoiZXlKUGQyNWxjaUk2SWpCNE1qZ3dabVkxT0dNMk5UYzNaRGhrWkRBeE5XVmlNelkzTUdRMU1UY3paVFl4WVRnNE1HWmxZU0lzSWtGalkyOTFiblFpT2lJd2VESTRNR1ptTlRoak5qVTNOMlE0WkdRd01UVmxZak0yTnpCa05URTNNMlUyTVdFNE9EQm1aV0VpTENKT1lXMWxJam9pZEdWemRHUnZiV0ZwYmpFeElpd2lVSEpwWTJVaU9uc2lZM1Z5Y21WdVkza2lPaUpQVEZRaUxDSjJZV3gxWlNJNklqRXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREFpZlgwPSIsImZlZSI6eyJQcmljZSI6eyJjdXJyZW5jeSI6Ik9MVCIsInZhbHVlIjoiMTAwMDAwMDAwMDAwMDAwMDAwMCJ9LCJHYXMiOjF9LCJtZW1vIjoiNGM1MzQ4ZTctYWNjOS0xMWU5LTlhN2MtNDIwMTBhMGEwMDA5In0=';
const signData = {
         message: messageOLT,
         keyType: "OLT",
         keyIndex: 0,
         password: "123456",
         encryptedMasterKeySeed
     };
const signTxResult = await HDVault.derivedKeyManager.signTx(signData).catch(err => {
         console.error("ERR : ", err.error);
     });
const {signature} = signTxResult.response;
console.log("get signature: ", signature);</code></pre>



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#signTx">signTx</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Tue Oct 29 2019 22:19:12 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>