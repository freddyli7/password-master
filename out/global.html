<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Global</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Global</h1>

    




<section>

<header>
    
        <h2></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="deriveNewKeyPair"><span class="type-signature">(async) </span>deriveNewKeyPair<span class="signature">(parameters)</span><span class="type-signature"> &rarr; {Promise.&lt;(response|error)>}</span></h4>
    

    



<div class="description">
    Derive new key.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>parameters</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The object of parameters.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>keyType</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The key type of the new key. keyType should be string of either "OLT", "BTCP2PK", "BTCP2PKH", "ETH".</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>keyIndex</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last">The key index, must be integer and start from 0</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>password</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">password of the encrypted master key.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>encryptedMasterKeySeed</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">encrypted master key string. This param should be read from local encrypted master key file</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>network</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">BitCoin network. Only applicable when the KeyType is any BitCoin key type. network should be one of "BTCOIN", "TESTNET" or "REGTEST".</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="derivedKeyManager.js.html">derivedKeyManager.js</a>, <a href="derivedKeyManager.js.html#line22">line 22</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    response has an object that contains new key keyIndex, new key address, new key public key. There will be no address for BTCP2PK. Error has an error object.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;(response|error)></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getMasterKeySeedAddressForRecovery"><span class="type-signature"></span>getMasterKeySeedAddressForRecovery<span class="signature">(mnemonicArray)</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    Derive master key address based on provided mnemonic array
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>mnemonicArray</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Object></span>


            
            </td>

            

            

            <td class="description last">mnemonic words array with {index:number, word:string} as each element
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>index</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last">word index, starting from 1</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>word</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">mnemonic word</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="masterKeySeed.js.html">masterKeySeed.js</a>, <a href="masterKeySeed.js.html#line134">line 134</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    master key address for comparing with the master key address stored in local master key file
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="mnemonicGenerator12"><span class="type-signature"></span>mnemonicGenerator12<span class="signature">()</span><span class="type-signature"> &rarr; {Array.&lt;Object>}</span></h4>
    

    



<div class="description">
    Generate 12 mnemonic words
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="masterKeySeed.js.html">masterKeySeed.js</a>, <a href="masterKeySeed.js.html#line26">line 26</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    return a array with {index:number, word:string} as each element
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;Object></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="mnemonicGenerator24"><span class="type-signature"></span>mnemonicGenerator24<span class="signature">()</span><span class="type-signature"> &rarr; {Array.&lt;Object>}</span></h4>
    

    



<div class="description">
    Generate 24 mnemonic words
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="masterKeySeed.js.html">masterKeySeed.js</a>, <a href="masterKeySeed.js.html#line17">line 17</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    return a array with {index:number, word:string} as each element
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;Object></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="signTx"><span class="type-signature"></span>signTx<span class="signature">(parameters)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    Sign txs with derived key
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>parameters</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Sign tx parameter object
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>message</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>
|

<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Message is different when choosing different keyType.
message is an Object if keyType is ETH; message is a string if keyType is OLT or BTC.
If KeyType is ETH, message must contain txParams field which is an object,
txConfig field is optional which is also an object, it is used to indicate Ethereum network and hardfork,
DO NOT pass txConfig object in message to use default txConfig (chain is mainnet, hardfork is petersburg).
In txConfig object, valid chain value should be one of "mainnet", "rinkeby", "ropsten", "kovan", "goerli",
valid hardfork value should be one of "petersburg", "constantinople", "byzantium".
Please see examples below.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>keyType</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">KeyType determines which chain is used to sign. Value should be string of either "OLT", "BTC " or "ETH".</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>keyIndex</code></td>
            

            <td class="type">
            
                
<span class="param-type">uint</span>


            
            </td>

            

            

            <td class="description last">KeyIndex is used to derive new key.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>password</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Password of encrypted master key seed.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>encryptedMasterKeySeed</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">EncryptedMasterKeySeed string.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>network</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Network determines which network to use. Value should be one of "BTCOIN", "TESTNET" or "REGTEST"(Network is only applicable for BitCoin for now).</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="derivedKeyManager.js.html">derivedKeyManager.js</a>, <a href="derivedKeyManager.js.html#line198">line 198</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    If success, Promise.resolve with {response : {signature : signatureValue[,recovery : recoveryValue]}}; If fail, Promise.reject with {error : errorObject} (recovery is only for BTC).
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>// 1.sign ETH tx with network as goerli and hardfork as byzantium:
const txParams = {
          nonce: 0,
          gasPrice: 1.1,
          gasLimit: 1,
          to: '0x034ca1740f01ae3e7fa6a2fc6b2afde39324f282',
          value: "1",
          data: "",
      };
const txConfig = {chain : "goerli", hardfork :"byzantium"};
const signData = {
          message: {txParams, txConfig},
          keyType: "ETH",
          keyIndex: 0,
          password: "123456",
          encryptedMasterKeySeed
      };
const signTxResult = await HDVault.derivedKeyManager.signTx(signData).catch(err => {
          console.error("ERR : ", err.error);
      });
const {response} = signTxResult;
const {signature} = response;
console.log("get signature: ", signature);</code></pre>

    <pre class="prettyprint"><code>// 2.sign ETH tx with default network(mainnet) and default hardfork(petersburg):
const txParams = {
          nonce: 0,
          gasPrice: 1.1,
          gasLimit: 1,
          to: '0x034ca1740f01ae3e7fa6a2fc6b2afde39324f282',
          value: "1",
          data: "",
      };
const signData = {
          message: {txParams},
          keyType: "ETH",
          keyIndex: 0,
          password: "123456",
          encryptedMasterKeySeed
      };
const signTxResult = await HDVault.derivedKeyManager.signTx(signData).catch(err => {
          console.error("ERR : ", err.error);
      });
const {response} = signTxResult;
const {signature} = response;
console.log("get signature: ", signature);</code></pre>

    <pre class="prettyprint"><code>// 3.sign BTC tx:
// BTC message should be a 64 char long string
const rawTxmessageBTC = "072a8543e388c4155ccbcd325f129000214095725598721cea986fcd0fc38d6a";
const signData = {
         message: rawTxmessageBTC,
         keyType: "BTC",
         keyIndex: 0,
         password: "123456",
         encryptedMasterKeySeed
     };
const signTxResult = await HDVault.derivedKeyManager.signTx(signData).catch(err => {
         console.error("ERR : ", err.error);
 });
const {response} = signTxResult;
const {signature} = response;
console.log("get signature: ", signature);</code></pre>

    <pre class="prettyprint"><code>// 4.sign OLT tx:
// OLT message should be a base64 encoded string
const messageOLT = 'eyJ0eF90eXBlIjoyLCJ0eF9kYXRhIjoiZXlKUGQyNWxjaUk2SWpCNE1qZ3dabVkxT0dNMk5UYzNaRGhrWkRBeE5XVmlNelkzTUdRMU1UY3paVFl4WVRnNE1HWmxZU0lzSWtGalkyOTFiblFpT2lJd2VESTRNR1ptTlRoak5qVTNOMlE0WkdRd01UVmxZak0yTnpCa05URTNNMlUyTVdFNE9EQm1aV0VpTENKT1lXMWxJam9pZEdWemRHUnZiV0ZwYmpFeElpd2lVSEpwWTJVaU9uc2lZM1Z5Y21WdVkza2lPaUpQVEZRaUxDSjJZV3gxWlNJNklqRXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREFpZlgwPSIsImZlZSI6eyJQcmljZSI6eyJjdXJyZW5jeSI6Ik9MVCIsInZhbHVlIjoiMTAwMDAwMDAwMDAwMDAwMDAwMCJ9LCJHYXMiOjF9LCJtZW1vIjoiNGM1MzQ4ZTctYWNjOS0xMWU5LTlhN2MtNDIwMTBhMGEwMDA5In0=';
const signData = {
         message: messageOLT,
         keyType: "OLT",
         keyIndex: 0,
         password: "123456",
         encryptedMasterKeySeed
     };
const signTxResult = await HDVault.derivedKeyManager.signTx(signData).catch(err => {
         console.error("ERR : ", err.error);
     });
const {signature} = signTxResult.response;
console.log("get signature: ", signature);</code></pre>



        
            

    

    
    <h4 class="name" id="unlockMasterKeySeed"><span class="type-signature">(async) </span>unlockMasterKeySeed<span class="signature">(password, encryptedMasterKeySeed)</span><span class="type-signature"> &rarr; {Promise.&lt;(boolean|error)>}</span></h4>
    

    



<div class="description">
    Check password when import masterKeySeed file
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>password</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">password</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>encryptedMasterKeySeed</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">encrypted master key. This param should be read from local encrypted master key file</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="masterKeySeed.js.html">masterKeySeed.js</a>, <a href="masterKeySeed.js.html#line145">line 145</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Promise.reject returns error, Promise.solve returns unlock result
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;(boolean|error)></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="verify"><span class="type-signature">(async) </span>verify<span class="signature">(address, addressType)</span><span class="type-signature"> &rarr; {Promise.&lt;(boolean|error)>}</span></h4>
    

    



<div class="description">
    Verify address based on address type
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>address</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">address to be verified.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>addressType</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">address type which is the same as key type, it should be string of either "OLT", "BTCP2PK", "BTCP2PKH", "ETH".</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="addressVerifier.js.html">addressVerifier.js</a>, <a href="addressVerifier.js.html#line15">line 15</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    promise.reject returns error object, promise.resolve returns verification result.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;(boolean|error)></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="verifyMnemonic"><span class="type-signature"></span>verifyMnemonic<span class="signature">(mnemonicArray)</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    



<div class="description">
    Verify mnemonic words
We don't accept other language word list for now, the default word list is english.
Developer should call this function to verify mnemonic words that user input before calling getMasterKeySeedAddressForRecovery when the master seed file is stored on local storage(user forget password scenario);
When user is doing recovery from a new device(no master seed file is stored on local storage), only call this function to verify the mnemonic words, than generating the master seed based on what user input. Please note that if this is the case,
it is possible that user still input valid mnemonic words BUT NOT THE ONES for his original wallet, therefore it could be a totally different wallet.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>mnemonicArray</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Object></span>


            
            </td>

            

            

            <td class="description last">An mnemonic array with {index:number, word:string} as each element</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="masterKeySeed.js.html">masterKeySeed.js</a>, <a href="masterKeySeed.js.html#line58">line 58</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    verify result
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="MasterKeySeedManager.html">MasterKeySeedManager</a></li></ul><h3>Global</h3><ul><li><a href="global.html#deriveNewKeyPair">deriveNewKeyPair</a></li><li><a href="global.html#getMasterKeySeedAddressForRecovery">getMasterKeySeedAddressForRecovery</a></li><li><a href="global.html#mnemonicGenerator12">mnemonicGenerator12</a></li><li><a href="global.html#mnemonicGenerator24">mnemonicGenerator24</a></li><li><a href="global.html#signTx">signTx</a></li><li><a href="global.html#unlockMasterKeySeed">unlockMasterKeySeed</a></li><li><a href="global.html#verify">verify</a></li><li><a href="global.html#verifyMnemonic">verifyMnemonic</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Thu Nov 28 2019 16:09:41 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>